<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns="http://www.w3.org/TR/REC-html40"><head>


<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link rel="File-List" href="http://www.di.ens.fr/%7Ejosef/mva/assignment1/index_files/filelist.xml">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
b\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>COMP 776 Assignment 1</title>
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"Times New Roman";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Courier New";
	panose-1:2 7 3 9 2 2 5 2 4 4;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{text-indent:0pt;
	margin-left:0pt;
	margin-right:0pt;
	margin-top:0pt;
	margin-bottom:0pt;
	text-align:left;
	font-family:"Times New Roman";
	font-size:12.0pt;
	color:black;}
h2
	{text-indent:0pt;
	margin-left:0pt;
	margin-right:0pt;
	margin-top:0pt;
	margin-bottom:14.0pt;
	text-align:left;
	font-family:"Times New Roman";
	font-size:24.0pt;
	color:black;
	font-weight:bold;}
h3
	{text-indent:0pt;
	margin-left:0pt;
	margin-right:0pt;
	margin-top:0pt;
	margin-bottom:14.0pt;
	text-align:left;
	font-family:"Times New Roman";
	font-size:14.0pt;
	color:black;
	font-weight:bold;}
ol
	{margin-top:0in;
	margin-bottom:0in;
	margin-left:.25in;}
ul
	{margin-top:0in;
	margin-bottom:0in;
	margin-left:.25in;}
@page
	{size:8.2673in 11.6923in;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="3075" fill="f" fillcolor="white [7]"
  strokecolor="black [0]">
  <v:fill color="white [7]" color2="white [7]" on="f"/>
  <v:stroke color="black [0]" color2="white [7]">
   <o:left v:ext="view" color="black [0]" color2="white [7]"/>
   <o:top v:ext="view" color="black [0]" color2="white [7]"/>
   <o:right v:ext="view" color="black [0]" color2="white [7]"/>
   <o:bottom v:ext="view" color="black [0]" color2="white [7]"/>
   <o:column v:ext="view" color="black [0]" color2="white [7]"/>
  </v:stroke>
  <v:shadow color="#ccc [4]"/>
  <v:textbox inset="2.88pt,2.88pt,2.88pt,2.88pt"/>
  <o:colormenu v:ext="edit" fillcolor="blue [1]" strokecolor="black [0]"
   shadowcolor="#ccc [4]"/>
 </o:shapedefaults><o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head><body style="margin: 0pt;" bgcolor="white" vlink="#6633cc" link="#0066ff">

<div style="position: absolute; width: 8.2833in; height: 22.2715in;">
<!--[if gte vml 1]><![if mso | ie]><v:shapetype id="_x0000_t201" coordsize="21600,21600"
 o:spt="201" path="m,l,21600r21600,l21600,xe">
 <v:stroke joinstyle="miter"/>
 <v:path shadowok="f" o:extrusionok="f" strokeok="f" fillok="f" o:connecttype="rect"/>
 <o:lock v:ext="edit" shapetype="t"/>
</v:shapetype><v:shape id="_x0000_s1026" type="#_x0000_t201" style='position:absolute;
 left:4.25pt;top:11.33pt;width:582.52pt;height:1591.12pt;z-index:1;
 mso-wrap-distance-left:2.88pt;mso-wrap-distance-top:2.88pt;
 mso-wrap-distance-right:2.88pt;mso-wrap-distance-bottom:2.88pt;
 mso-position-horizontal:absolute' stroked="f" strokecolor="black [0]"
 insetpen="t" o:cliptowrap="t">
 <v:stroke color2="white [7]">
  <o:left v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:top v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:right v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:bottom v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:column v:ext="view" color="black [0]" color2="white [7]"/>
 </v:stroke>
 <v:shadow color="#ccc [4]"/>
 <o:lock v:ext="edit" rotation="t"/>
 <v:textbox inset="0,0,0,0">
 </v:textbox>
</v:shape><![endif]><![endif]-->

<table v:shapes="_x0000_s1026" dir="ltr" style="width: 582.5pt; height: 1591.1pt; border-collapse: collapse; position: absolute; top: 11.3pt; left: 4.25pt; z-index: 1;" cellpadding="0" cellspacing="0" width="776" height="2121">
 <tbody><tr>
  <td style="width: 582.5pt; height: 1591.1pt;" valign="top" width="776" height="2121">
  <h2><span style="">MVA 2008 - 2009</span></h2>
  <h2><span style="">Object recognition and computer vision </span></h2>
  <h2><span style="">Assignment 1: Scale-invariant blob detection</span></h2>
  <h3><span style="font-size: 16pt;">Jean Ponce, Cordelia Schmid and Josef Sivic</span></h3>
  <h3><span style="font-size: 16pt;">(adapted from Svetlana Lazebnik, UNC)</span></h3>
  <h3><span style="font-size: 16pt;">Due date: October 21st 2008</span></h3>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">The goal of the assignment is to implement a Laplacian blob detector as discussed in the lectures.</span></p>
  <h3><span style="font-size: 16pt;">Algorithm outline:</span></h3>
  <p class="MsoNormal"><span style="">1. Generate a Laplacian of Gaussian filter.</span></p>
  <p class="MsoNormal"><span style="">2. Build a Laplacian scale space, starting with some initial scale and going for n iterations: </span></p>
  <p class="MsoNormal" style="margin-left: 28.25pt;"><span style="">1. Filter image with scale-normalized Laplacian at current scale.</span></p>
  <p class="MsoNormal" style="margin-left: 28.25pt;"><span style="">2. Save square of Laplacian response for current level of scale space.</span></p>
  <p class="MsoNormal" style="margin-left: 28.25pt;"><span style="">3. Increase scale by a factor k.</span></p>
  <p class="MsoNormal"><span style="">3. Perform non-maximum suppression in scale space.</span></p>
  <p class="MsoNormal"><span style="">4. Display resulting circles at their characteristic scales.</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <h3><span style="">Tips</span></h3>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">It
is relatively inefficient to repeatedly filter the image with a kernel
of increasing size. Instead of increasing the kernel size by a factor
of k, try downsampling the image by a factor 1/k (of course, then you
will have to upsample the result or do some interpolation in order to
find maxima in scale space). Alternatively, implement the
difference-of-Gaussian pyramid as described in section 3 of </span><span style=""><a href="http://www.cs.ubc.ca/%7Elowe/papers/ijcv04.pdf">David Lowe's paper</a></span><span style=""> (see below).</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">You
have to choose the initial scale, the factor k by which the scale is
multiplied each time, and the number of levels in the scale space.
Reasonable value for the initial scale is 2, using 10 to 15 levels for
the scale pyramid. The multiplication factor should depend on the
largest scale at which you want regions to be detected (or, if you are
implementing the difference-of-Gaussian scale space, this factor
depends on computational efficiency considerations as described in
David Lowe's paper).</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">You may want to use a three-dimensional array to represent your scale space. It would be declared as follows:</span></p>
  <p class="MsoNormal" style="margin-left: 18pt;"><span style="font-family: &quot;Courier New&quot;;"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-left: 56.5pt;"><span style="font-family: &quot;Courier New&quot;;">scale_space = zeros(h,w,n); % [h,w] - dimensions of image, n - number of levels in scale space</span></p>
  <p class="MsoNormal" style="margin-left: 18pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-left: 18pt;"><span style="">Then </span><span style="font-family: &quot;Courier New&quot;;">scale_space(:,:,i)</span><span style="">
would give you the i-th level of the scale space. Alternatively, if you
are storing different levels of the scale pyramid at different
resolutions, you may want to use a cell array, where each "slot" can
accommodate a different data type or a matrix of different dimensions.
Here is how you would use it:</span></p>
  <p class="MsoNormal" style="margin-left: 18pt;"><span style="font-family: &quot;Courier New&quot;;"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-left: 56.5pt;"><span style="font-family: &quot;Courier New&quot;;">scale_space&nbsp;&nbsp;&nbsp; = cell(n,1); %creates a cell array with n "slots" </span></p>
  <p class="MsoNormal" style="margin-left: 56.5pt;"><span style="font-family: &quot;Courier New&quot;;">scale_space{i} = my_matrix; % store a matrix at level i</span></p>
  <p class="MsoNormal" style="margin-left: -18pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">To
perform nonmaximum suppression in scale space, you may first want to do
nonmaximum suppression in each 2D slice separately. For this, you may
find functions </span><span style="font-family: &quot;Courier New&quot;;">nlfilter</span><span style="">, </span><span style="font-family: &quot;Courier New&quot;;">colfilt</span><span style=""> or </span><span style="font-family: &quot;Courier New&quot;;">ordfilt2</span><span style=""> useful. To extract the final nonzero values (corresponding to detected regions), you may want to use the </span><span style="font-family: &quot;Courier New&quot;;">find</span><span style=""> function.</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">You
also have to set a threshold on the squared Laplacian response above
which to report region detections. A reasonable value is 0.001, but you
should play around with different values and choose one you like best.</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">To display the detected regions as circles, you can use </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment1/show_all_circles.m">this function</a></span><span style="">
(or feel free to write your own). Don't forget that there is a
multiplication factor that relates the scale at which a region is
detected to the radius of the circle that most closely "approximates"
the region.</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">If
you decide to experiment with different implementation choices for
building the scale space and nonmaximum suppression, you may want to
compare these choices according to their computational efficiency. To
time different routines, use </span><span style="font-family: &quot;Courier New&quot;;">tic</span><span style=""> and </span><span style="font-family: &quot;Courier New&quot;;">toc</span><span style=""> commands.</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Apply the detector to greyscale versions of colour images. In Matlab, you can convert a color image to greyscale using </span></p>
  <p class="MsoNormal" style="margin-left: 56.5pt;"><span style="font-family: &quot;Courier New&quot;;"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-left: 56.5pt;"><span style="font-family: &quot;Courier New&quot;;">Im_gray = mean(Im_rgb,3);</span></p>
  <h3><span style="font-size: 12pt;"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></h3>
  <h3><span style="font-size: 16pt;">Test images</span></h3>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">Here are </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment1/assignment1_images.zip">four images</a></span><span style=""> to test your code. Also run your code on two images of your own choice.&nbsp; </span></p>
  <h3><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></h3>
  <h3><span style="font-size: 16pt;">What to hand in</span></h3>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">You
should implement the basic version of the Laplacian blob detector as
described in the algorithm outline above. Extra credit will be given
for implementing one of the more efficient options: (1) using image
down-sampling by factor </span><span style="font-style: italic;"><span dir="ltr"></span>1/k</span><span style=""> (rather then increasing the kernel size by a factor of&nbsp; </span><span style="font-style: italic;">k</span><span style="">) or (2) the difference of Gaussian approximation described in section 3 of </span><span style=""><a href="http://www.cs.ubc.ca/%7Elowe/papers/ijcv04.pdf">David Lowe’s paper</a></span><span style="">.</span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">You should prepare a (very brief) report including the following: </span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">An explanation of any "interesting" implementation choices that you made.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">An explanation of parameter values you have tried and which ones you found to work well.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Output of your detector on all test images for your "favourite" parameter settings.</span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">Send your report, code, and your two additional test images in a single zip file to&nbsp; </span><span style="font-weight: bold;">Josef Sivic &lt;Josef.Sivic@ens.fr&gt;</span><span style="">.</span></p>
  <h3><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></h3>
  <h3><span style="font-size: 13.5pt;">Helpful </span><span style="">resources</span></h3>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">MATLAB tutorials (from </span><span style=""><a href="http://www.andrew.cmu.edu/course/16-720/">Martial Hebert at CMU</a></span><span style="">): </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment1/matlab_ops_tutorial.m">basic operations</a></span><span style="">, </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment1/matlab_prog_tutorial.m">programming</a></span><span style="">, </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment1/matlab_image_tutorial.m">working with images</a></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment1/harris.m">Sample Harris detector code</a></span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Nice </span><span style=""><a href="http://www.cs.unc.edu/%7Elazebnik/research/spring08/lec07_corner_blob.pdf">Slides</a></span><span style=""> by Svetlana Lazebnik on feature detection describing also scale invariant blob detection (slides 32—49). </span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style=""><a href="http://en.wikipedia.org/wiki/Blob_detection">Blob detection</a></span><span style=""> on Wikipedia.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">D. Lowe, </span><span style=""><a href="http://www.cs.ubc.ca/%7Elowe/papers/ijcv04.pdf">"Distinctive image features from scale-invariant keypoints,"</a></span><span style="">
International Journal of Computer Vision, 60 (2), pp. 91-110, 2004.
This paper contains details about efficient implementation of a
Difference-of-Gaussians scale space.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">T. Lindeberg, </span><span style=""><a href="ftp://ftp.nada.kth.se/CVAP/reports/cvap198.pdf">"Feature detection with automatic scale selection,"</a></span><span style=""> International Journal of Computer Vision 30 (2), pp. 77-116, 1998. This is somewhat advanced reading for those of you who are </span><span style="font-style: italic;">really</span><span style=""> interested in the gory mathematical details.</span></p>
  </td>
 </tr>
</tbody></table>


</div>

</body></html>